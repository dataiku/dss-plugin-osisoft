{
  "meta": {
    "label": "Synchronizing all attributes metrics",
    "description": "Align timestamps of all attributes on one synchronizing attribute.",
    "icon": "icon-dku-timeseries-resample icon-DKU_timeseries_resample",
    "displayOrderRank": 1
  },
  "kind": "PYTHON",
  "selectableFromDataset": "input_dataset",
  "inputRoles": [
    {
      "name": "input_dataset",
      "label": "Input time series",
      "description": "Dataset containing your time series data.",
      "arity": "UNARY",
      "required": true,
      "acceptsDataset": true,
      "acceptsFolder": false
    }
  ],
  "outputRoles": [
    {
      "name": "output_dataset",
      "label": "Output time series",
      "description": "Output dataset with equispaced time series.",
      "arity": "UNARY",
      "required": true,
      "acceptsDataset": true
    }
  ],
  "params": [
    {
      "type": "SEPARATOR",
      "name": "separator_input",
      "label": "Input parameters"
    },
    {
      "name": "datetime_column",
      "label": "Time column",
      "type": "COLUMN",
      "columnRole": "input_dataset",
      "allowedColumnTypes": [
        "date"
      ],
      "mandatory": true
    },
    {
      "name": "advanced_activated",
      "label": "Long format",
      "description": "If multiple time series are stored in the same column",
      "defaultValue": true,
      "visibilityCondition": false,
      "type": "BOOLEAN"
    },
    // {
    //   "name": "groupby_column",
    //   "label": "Column with identifier",
    //   "type": "COLUMN",
    //   "columnRole": "input_dataset",
    //   "mandatory": false,
    //   "description": "⚠️  Deprecated. Use the field 'Time series identifiers' instead",
    //   "visibilityCondition": "model.advanced_activated && (model.groupby_column.length > 0)"
    // },
    {
      "name": "groupby_column",
      "label": "Paths column",
      "description": "Column containing the attributes' path",
      "type": "COLUMN",
      "allowedColumnTypes": [
        "tinyint",
        "smallint",
        "int",
        "bigint",
        "string",
        "boolean"
      ],
      "columnRole": "input_dataset",
      "mandatory": false,
      "visibilityCondition": "model.advanced_activated"
    },
    {
      "name": "sep1",
      "label": "Resampling parameters",
      "type": "SEPARATOR"
    },
    {
      "name": "synchronize_on_identifier",
      "label": "Synchronize",
      "description": "Synchronize all identifier to a reference one",
      "type": "BOOLEAN",
      "mandatory": false,
      "defaultValue": true,
      // "visibilityCondition": "model.advanced_activated==true"
      "visibilityCondition": false
    },
    {
      "name": "time_reference_identifier",
      "label": "Path of the time reference",
      "description": "Path of the attribute to synchronize to",
      "type": "STRING",
      "mandatory": false,
      "visibilityCondition": "(model.advanced_activated==true) && (model.synchronize_on_identifier==true)"
    },
    {
      "name": "time_step",
      "label": "Time step",
      "type": "DOUBLE",
      "defaultValue": 1,
      "minD": 0.0001,
      "visibilityCondition": "!((model.advanced_activated==true) && (model.synchronize_on_identifier==true))"
    },
    {
      "name": "time_unit",
      "label": "Unit",
      "type": "SELECT",
      "visibilityCondition": "!((model.advanced_activated==true) && (model.synchronize_on_identifier==true))",
      "selectChoices": [
        {
          "value": "nanoseconds",
          "label": "Nanoseconds"
        },
        {
          "value": "microseconds",
          "label": "Microseconds"
        },
        {
          "value": "milliseconds",
          "label": "Milliseconds"
        },
        {
          "value": "seconds",
          "label": "Seconds"
        },
        {
          "value": "minutes",
          "label": "Minutes"
        },
        {
          "value": "hours",
          "label": "Hours"
        },
        {
          "value": "days",
          "label": "Days"
        },
        {
          "value": "business_days",
          "label": "Business days (Mon-Fri)"
        },
        {
          "value": "weeks",
          "label": "Weeks"
        },
        {
          "value": "months",
          "label": "Months"
        },
        {
          "value": "quarters",
          "label": "Quarters"
        },
        {
          "value": "semi_annual",
          "label": "Semi-annual"
        },
        {
          "value": "years",
          "label": "Years"
        }
      ],
      "defaultValue": "seconds"
    },
    {
      "name": "time_unit_end_of_week",
      "label": "End of week day",
      "type": "SELECT",
      "mandatory": false,
      "defaultValue": "SUN",
      "visibilityCondition": "model.time_unit == 'weeks'",
      "selectChoices": [
        {
          "value": "SUN",
          "label": "Sunday"
        },
        {
          "value": "MON",
          "label": "Monday"
        },
        {
          "value": "TUE",
          "label": "Tuesday"
        },
        {
          "value": "WED",
          "label": "Wednesday"
        },
        {
          "value": "THU",
          "label": "Thursday"
        },
        {
          "value": "FRI",
          "label": "Friday"
        },
        {
          "value": "SAT",
          "label": "Saturday"
        }
      ]
    },
    {
      "name": "sep2",
      "label": "Methods",
      "type": "SEPARATOR"
    },
    {
      "name": "interpolation_method",
      "label": "Interpolate",
      "description": "Used to compute values for dates located between two existing data points",
      "type": "SELECT",
      "visibilityCondition": false,
      "selectChoices": [
        {
          "value": "nearest",
          "label": "Nearest"
        },
        {
          "value": "previous",
          "label": "Previous"
        },
        {
          "value": "next",
          "label": "Next"
        },
        {
          "value": "linear",
          "label": "Linear"
        },
        {
          "value": "zero",
          "label": "Mean"
        },
        {
          "value": "quadratic",
          "label": "Quadratic"
        },
        {
          "value": "cubic",
          "label": "Cubic"
        },
        {
          "value": "constant",
          "label": "Constant"
        },
        {
          "value": "none",
          "label": "Don't interpolate (impute null)"
        }
      ],
      "defaultValue": "previous"
    },
    {
      "name": "constant_value",
      "label": "Constant value",
      "type": "DOUBLE",
      "defaultValue": 0,
      "visibilityCondition": "model.interpolation_method == 'constant'"
    },
    {
      "name": "extrapolation_method",
      "label": "Extrapolate",
      "description": "Used to compute values for dates before or after the last known data point",
      "type": "SELECT",
      "visibilityCondition": false,
      "selectChoices": [
        {
          "value": "clip",
          "label": "Previous/next"
        },
        {
          "value": "interpolation",
          "label": "Same as interpolation"
        },
        {
          "value": "none",
          "label": "Don't extrapolate (impute null)"
        },
        {
          "value": "no_extrapolation",
          "label": "Don't extrapolate (no imputation)"
        }
      ],
      "defaultValue": "clip"
    },
    {
      "name": "category_imputation_method",
      "label": "Impute categorical data",
      "description": "Used to fill in categorical values during interpolation and extrapolation",
      "type": "SELECT",
      "visibilityCondition": false,
      "selectChoices": [
        {
          "value": "empty",
          "label": "Empty"
        },
        {
          "value": "constant",
          "label": "Constant"
        },
        {
          "value": "mode",
          "label": "Most common"
        },
        {
          "value": "clip",
          "label": "Previous/next"
        },
        {
          "value": "previous",
          "label": "Previous"
        },
        {
          "value": "next",
          "label": "Next"
        }
      ],
      "defaultValue": "previous"
    },
    {
      "name": "category_constant_value",
      "label": "Constant value",
      "type": "STRING",
      "defaultValue": "",
      "visibilityCondition": "model.category_imputation_method == 'constant'"
    },
    {
      "name": "sepEdition",
      "label": "Advanced parameters",
      "type": "SEPARATOR",
      "visibilityCondition": false
    },
    {
      "name": "clip_start",
      "label": "Clip start",
      "description": "Number of time steps to skip at the beginning of the series.",
      "type": "DOUBLE",
      "defaultValue": 0,
      "visibilityCondition": false
    },
    {
      "name": "clip_end",
      "label": "Clip end",
      "description": "Number of time steps to skip at the end of the series.",
      "type": "DOUBLE",
      "defaultValue": 0,
      "visibilityCondition": false
    },
    {
      "name": "shift",
      "label": "Shift value",
      "description": "Shift all time stamps by this amount (can be negative).",
      "type": "DOUBLE",
      "defaultValue": 0,
      "visibilityCondition": false
    }
  ]
}
